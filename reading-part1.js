// reading-part1.js
const readingPart1Bank = [
    {
        text: `The concept of remote work has (1)______ significant attention in recent years. While some companies initially (2)______ the idea, many have now embraced it as a viable option. One major (3)______ is the potential for reduced overhead costs. However, experts (4)______ out that isolation can still be an issue. Proper communication tools are (5)______ to maintaining team cohesion. Ultimately, the (6)______ towards flexible work arrangements appears (7)______, though challenges (8)______.`,
        gaps: {
            1: {
                correct: "gained",
                options: ["gained", "won", "earned", "achieved"]
            },
            2: {
                correct: "resisted",
                options: ["resisted", "opposed", "rejected", "denied"]
            },
            3: {
                correct: "advantage",
                options: ["advantage", "benefit", "profit", "gain"]
            },
            4: {
                correct: "point",
                options: ["point", "show", "indicate", "mark"]
            },
            5: {
                correct: "crucial",
                options: ["crucial", "important", "vital", "critical"]
            },
            6: {
                correct: "trend",
                options: ["trend", "tendency", "direction", "movement"]
            },
            7: {
                correct: "irreversible",
                options: ["irreversible", "permanent", "fixed", "stable"]
            },
            8: {
                correct: "persist",
                options: ["persist", "remain", "stay", "keep"]
            }
        }
    },
    {
        text: `Modern urban planning (1)______ heavily on sustainable development principles. City planners now (2)______ particular emphasis on green spaces and pedestrian zones. A (3)______ concern is reducing carbon emissions through improved public transport. Many cities have (4)______ up ambitious cycling infrastructure projects. However, (5)______ these efforts, traffic congestion continues to (6)______ a major challenge. The (7)______ between private and public transportation needs remains delicate. Most experts (8)______ that multimodal solutions are essential.`,
        gaps: {
            1: {
                correct: "relies",
                options: ["relies", "depends", "counts", "banks"]
            },
            2: {
                correct: "place",
                options: ["place", "put", "set", "lay"]
            },
            3: {
                correct: "key",
                options: ["key", "main", "central", "prime"]
            },
            4: {
                correct: "taken",
                options: ["taken", "set", "put", "brought"]
            },
            5: {
                correct: "despite",
                options: ["despite", "although", "however", "while"]
            },
            6: {
                correct: "pose",
                options: ["pose", "present", "offer", "show"]
            },
            7: {
                correct: "balance",
                options: ["balance", "equilibrium", "middle", "center"]
            },
            8: {
                correct: "argue",
                options: ["argue", "discuss", "claim", "state"]
            }
        }
    },
    {
        text: `The digital revolution has (1)______ how we consume media. Streaming platforms now (2)______ traditional TV viewing for many users. A key (3)______ is the instant access to global content. However, experts (4)______ concerns about data privacy issues. The (5)______ towards on-demand entertainment appears (6)______, though some older demographics still (7)______ to conventional methods. Industry analysts (8)______ this trend will accelerate.`,
        gaps: {
            1: { correct: "transformed", options: ["transformed", "changed", "altered", "modified"] },
            2: { correct: "replace", options: ["replace", "substitute", "exchange", "displace"] },
            3: { correct: "attraction", options: ["attraction", "appeal", "draw", "pull"] },
            4: { correct: "raise", options: ["raise", "lift", "elevate", "heighten"] },
            5: { correct: "shift", options: ["shift", "change", "move", "transition"] },
            6: { correct: "irreversible", options: ["irreversible", "permanent", "fixed", "set"] },
            7: { correct: "cling", options: ["cling", "stick", "hold", "adhere"] },
            8: { correct: "predict", options: ["predict", "forecast", "anticipate", "estimate"] }
        }
    },
    {
        text: `Sustainable fashion has (1)______ momentum in recent years. Consumers increasingly (2)______ for ethically produced clothing. A major (3)______ remains the higher cost of eco-friendly materials. Many brands now (4)______ transparency in their supply chains. The (5)______ between style and sustainability often (6)______ careful balancing. Despite progress, critics (7)______ that more radical changes are (8)______.`,
        gaps: {
            1: { correct: "gained", options: ["gained", "acquired", "obtained", "attained"] },
            2: { correct: "opt", options: ["opt", "choose", "select", "prefer"] },
            3: { correct: "hurdle", options: ["hurdle", "obstacle", "barrier", "challenge"] },
            4: { correct: "prioritize", options: ["prioritize", "emphasize", "focus", "stress"] },
            5: { correct: "balance", options: ["balance", "equilibrium", "middle", "center"] },
            6: { correct: "requires", options: ["requires", "needs", "demands", "necessitates"] },
            7: { correct: "argue", options: ["argue", "contend", "assert", "declare"] },
            8: { correct: "essential", options: ["essential", "crucial", "vital", "critical"] }
        }
    },
    {
        text: `Remote healthcare services have (1)______ dramatically since 2020. Patients now (2)______ virtual consultations for routine check-ups. A significant (3)______ is maintaining the quality of diagnosis through screens. Technical glitches sometimes (4)______ unexpected complications. Nevertheless, advocates (5)______ to the convenience and accessibility benefits. The (6)______ towards telemedicine seems (7)______, though some practitioners (8)______ reservations about its limitations.`,
        gaps: {
            1: { correct: "expanded", options: ["expanded", "grown", "increased", "developed"] },
            2: { correct: "utilize", options: ["utilize", "use", "employ", "apply"] },
            3: { correct: "challenge", options: ["challenge", "difficulty", "problem", "issue"] },
            4: { correct: "create", options: ["create", "cause", "produce", "generate"] },
            5: { correct: "point", options: ["point", "refer", "allude", "direct"] },
            6: { correct: "transition", options: ["transition", "shift", "change", "movement"] },
            7: { correct: "inevitable", options: ["inevitable", "unavoidable", "certain", "inescapable"] },
            8: { correct: "express", options: ["express", "voice", "state", "share"] }
        }
    },
    {
        text: `The transition to renewable energy has (1)______ rapidly in recent decades. Many nations now (2)______ fossil fuels in favor of solar and wind power. A key (3)______ remains the storage of generated energy. Engineers (4)______ innovative battery technologies to address this issue. Despite progress, critics (5)______ that existing infrastructure still (6)______ heavily on traditional grids. The (7)______ towards full sustainability appears (8)______ but requires sustained effort.`,
        gaps: {
            1: { correct: "accelerated", options: ["accelerated", "increased", "expanded", "developed"] },
            2: { correct: "abandoning", options: ["abandoning", "leaving", "rejecting", "dropping"] },
            3: { correct: "hurdle", options: ["hurdle", "obstacle", "problem", "difficulty"] },
            4: { correct: "prioritize", options: ["prioritize", "focus", "concentrate", "specialize"] },
            5: { correct: "contend", options: ["contend", "argue", "state", "declare"] },
            6: { correct: "relies", options: ["relies", "depends", "counts", "banks"] },
            7: { correct: "shift", options: ["shift", "change", "movement", "transition"] },
            8: { correct: "achievable", options: ["achievable", "possible", "feasible", "attainable"] }
        }
    },
    {
        text: `Urban development projects increasingly (1)______ green spaces into their designs. Planners (2)______ that access to nature improves residents' well-being. A significant (3)______ involves balancing construction needs with environmental (4)______. Many cities now (5)______ vertical gardens and rooftop parks. However, maintenance costs often (6)______ expectations. The (7)______ of these initiatives depends on community (8)______ and funding.`,
        gaps: {
            1: { correct: "incorporate", options: ["incorporate", "include", "integrate", "combine"] },
            2: { correct: "maintain", options: ["maintain", "claim", "assert", "declare"] },
            3: { correct: "challenge", options: ["challenge", "problem", "issue", "difficulty"] },
            4: { correct: "preservation", options: ["preservation", "conservation", "protection", "safeguarding"] },
            5: { correct: "feature", options: ["feature", "showcase", "display", "present"] },
            6: { correct: "exceed", options: ["exceed", "surpass", "outstrip", "overcome"] },
            7: { correct: "success", options: ["success", "achievement", "accomplishment", "triumph"] },
            8: { correct: "engagement", options: ["engagement", "participation", "involvement", "collaboration"] }
        }
    },
    {
        text: `Digital literacy has become (1)______ in modern education systems. Schools now (2)______ digital skills alongside traditional subjects. A major (3)______ lies in ensuring equal access to technology. Many educators (4)______ interactive platforms to enhance learning. However, some parents (5)______ concerns about excessive screen time. The (6)______ between digital and conventional methods remains (7)______ ongoing debate. Most experts (8)______ a balanced approach yields best results.`,
        gaps: {
            1: { correct: "crucial", options: ["crucial", "vital", "essential", "critical"] },
            2: { correct: "emphasize", options: ["emphasize", "stress", "highlight", "prioritize"] },
            3: { correct: "obstacle", options: ["obstacle", "challenge", "hurdle", "barrier"] },
            4: { correct: "utilize", options: ["utilize", "use", "employ", "apply"] },
            5: { correct: "voice", options: ["voice", "express", "air", "share"] },
            6: { correct: "balance", options: ["balance", "equilibrium", "middle", "center"] },
            7: { correct: "an", options: ["an", "a", "the", "some"] },
            8: { correct: "maintain", options: ["maintain", "contend", "argue", "insist"] }
        }
    },
    {
        text: `Modern workplace dynamics have (1)______ significantly with remote work adoption. Employers now (2)______ output over physical presence. A key (3)______ involves maintaining team cohesion virtually. Many companies (4)______ digital collaboration tools extensively. However, some employees (5)______ isolation affects creativity. The (6)______ towards hybrid models appears (7)______, though implementation (8)______ vary.`,
        gaps: {
            1: { correct: "evolved", options: ["evolved", "changed", "developed", "advanced"] },
            2: { correct: "prioritize", options: ["prioritize", "emphasize", "focus", "value"] },
            3: { correct: "challenge", options: ["challenge", "problem", "issue", "difficulty"] },
            4: { correct: "utilize", options: ["utilize", "use", "employ", "apply"] },
            5: { correct: "claim", options: ["claim", "assert", "state", "declare"] },
            6: { correct: "shift", options: ["shift", "change", "transition", "movement"] },
            7: { correct: "inevitable", options: ["inevitable", "unavoidable", "certain", "inescapable"] },
            8: { correct: "strategies", options: ["strategies", "approaches", "methods", "plans"] }
        }
    },
    {
        text: `Sustainable tourism initiatives (1)______ preserving cultural heritage while promoting travel. Many destinations now (2)______ visitor numbers to prevent overcrowding. A significant (3)______ involves educating tourists about local customs. Some operators (4)______ eco-friendly accommodations exclusively. However, cost considerations often (5)______ implementation. The (6)______ between profitability and preservation remains (7)______ delicate balance. Industry leaders (8)______ collaboration is essential for success.`,
        gaps: {
            1: { correct: "aim", options: ["aim", "seek", "strive", "attempt"] },
            2: { correct: "limit", options: ["limit", "restrict", "cap", "control"] },
            3: { correct: "aspect", options: ["aspect", "element", "component", "factor"] },
            4: { correct: "offer", options: ["offer", "provide", "supply", "present"] },
            5: { correct: "hinder", options: ["hinder", "impede", "obstruct", "hamper"] },
            6: { correct: "balance", options: ["balance", "equilibrium", "middle", "center"] },
            7: { correct: "a", options: ["a", "an", "the", "some"] },
            8: { correct: "emphasize", options: ["emphasize", "stress", "highlight", "underline"] }
        }
    },
    {
    text: `Mental health awareness has (1)______ significantly in workplace policies. Many companies now (2)______ employee well-being programs. A key (3)______ involves reducing the stigma around seeking help. HR departments (4)______ regular workshops on stress management. Despite progress, some employees still (5)______ discussing mental health openly. The (6)______ between productivity and well-being remains a (7)______ topic. Experts (8)______ that fostering open dialogue is crucial.`,
    gaps: {
        1: { correct: "grown", options: ["grown", "increased", "expanded", "developed"] },
        2: { correct: "implement", options: ["implement", "install", "apply", "employ"] },
        3: { correct: "challenge", options: ["challenge", "hurdle", "obstacle", "difficulty"] },
        4: { correct: "conduct", options: ["conduct", "organize", "manage", "operate"] },
        5: { correct: "avoid", options: ["avoid", "evade", "shun", "ignore"] },
        6: { correct: "balance", options: ["balance", "equation", "relationship", "connection"] },
        7: { correct: "contentious", options: ["contentious", "debated", "controversial", "disputed"] },
        8: { correct: "emphasize", options: ["emphasize", "stress", "highlight", "underline"] }
    }
},
{
    text: `The gig economy has (1)______ traditional employment models. Freelancers now (2)______ a substantial portion of the workforce. A major (3)______ is the lack of job security. Many platforms (4)______ flexible hours as their main advantage. However, workers often (5)______ unpredictable income streams. The (6)______ towards project-based work appears (7)______, though labor laws (8)______ to catch up.`,
    gaps: {
        1: { correct: "transformed", options: ["transformed", "changed", "altered", "modified"] },
        2: { correct: "constitute", options: ["constitute", "form", "compose", "represent"] },
        3: { correct: "drawback", options: ["drawback", "disadvantage", "shortcoming", "weakness"] },
        4: { correct: "promote", options: ["promote", "advertise", "market", "push"] },
        5: { correct: "face", options: ["face", "confront", "encounter", "experience"] },
        6: { correct: "shift", options: ["shift", "change", "transition", "movement"] },
        7: { correct: "irreversible", options: ["irreversible", "permanent", "fixed", "lasting"] },
        8: { correct: "struggle", options: ["struggle", "fight", "strive", "battle"] }
    }
},
{
    text: `International climate agreements (1)______ nations to reduce carbon emissions. Many countries (2)______ renewable energy targets. A persistent (3)______ involves balancing industrial growth with environmental (4)______. Some governments (5)______ tax incentives for green technologies. However, compliance (6)______ often fall short of promises. The (7)______ for global cooperation has never been more (8)______.`,
    gaps: {
        1: { correct: "oblige", options: ["oblige", "require", "compel", "bind"] },
        2: { correct: "set", options: ["set", "establish", "fix", "determine"] },
        3: { correct: "dilemma", options: ["dilemma", "paradox", "problem", "issue"] },
        4: { correct: "sustainability", options: ["sustainability", "preservation", "conservation", "protection"] },
        5: { correct: "offer", options: ["offer", "provide", "grant", "supply"] },
        6: { correct: "metrics", options: ["metrics", "measures", "standards", "indicators"] },
        7: { correct: "need", options: ["need", "demand", "requirement", "necessity"] },
        8: { correct: "urgent", options: ["urgent", "pressing", "critical", "vital"] }
    }
},
{
    text: `5G technology deployment has (1)______ mobile communication capabilities. Telecom companies (2)______ faster speeds and lower latency. A significant (3)______ involves upgrading existing infrastructure. Urban areas (4)______ priority for initial rollout. However, rural regions (5)______ behind in access. The (6)______ between innovation and accessibility remains (7)______. Engineers (8)______ nationwide coverage within this decade.`,
    gaps: {
        1: { correct: "revolutionized", options: ["revolutionized", "transformed", "changed", "altered"] },
        2: { correct: "promise", options: ["promise", "guarantee", "assure", "pledge"] },
        3: { correct: "hurdle", options: ["hurdle", "obstacle", "challenge", "barrier"] },
        4: { correct: "receive", options: ["receive", "get", "obtain", "acquire"] },
        5: { correct: "lag", options: ["lag", "trail", "fall", "linger"] },
        6: { correct: "gap", options: ["gap", "divide", "difference", "disparity"] },
        7: { correct: "substantial", options: ["substantial", "significant", "considerable", "notable"] },
        8: { correct: "predict", options: ["predict", "forecast", "anticipate", "project"] }
    }
},
{
    text: `Blended learning models (1)______ traditional and digital teaching methods. Educators (2)______ this approach enhances student engagement. A primary (3)______ involves ensuring technological access for all. Many institutions (4)______ interactive software in their curricula. However, some teachers (5)______ the impersonal nature of online tools. The (6)______ towards hybrid education appears (7)______, though adaptation (8)______ vary.`,
    gaps: {
        1: { correct: "combine", options: ["combine", "merge", "mix", "blend"] },
        2: { correct: "claim", options: ["claim", "assert", "state", "declare"] },
        3: { correct: "concern", options: ["concern", "issue", "problem", "worry"] },
        4: { correct: "integrate", options: ["integrate", "incorporate", "include", "embed"] },
        5: { correct: "criticize", options: ["criticize", "condemn", "denounce", "disparage"] },
        6: { correct: "transition", options: ["transition", "shift", "change", "movement"] },
        7: { correct: "inevitable", options: ["inevitable", "unavoidable", "certain", "inescapable"] },
        8: { correct: "rates", options: ["rates", "speeds", "paces", "tempos"] }
    }
}
];

// Expansion Method:
function generateTextTemplate(topic, verbs, nouns, adjectives) {
    return {
        text: `[${topic} introduction] (1)______ [${verbs[0]}]. [Development] (2)______ [${verbs[1]}]. 
        [Challenge] (3)______ [${nouns[0]}]. [Solution] (4)______ [${verbs[2]}]. 
        [Contrast] (5)______ [${adjectives[0]}]. [Conclusion] (6-8)______ [complex vocab].`,
        gaps: { /* Auto-generate gaps */ }
    }
}    
];


function generateNewTest() {
    currentTest = readingPart1Bank[Math.floor(Math.random() * readingPart1Bank.length)];
    const container = document.getElementById('text-container');
    let textHtml = currentTest.text;
    
    // Replace gaps with randomized dropdowns
    for(let i = 1; i <= 8; i++) {
        const gap = currentTest.gaps[i];
        
        // Create shuffled options with blank first
        const options = [gap.correct, ...gap.options.filter(o => o !== gap.correct)];
        const shuffledOptions = shuffleArray(options);
        
        const selectOptions = [
            '<option value="" disabled selected>Select...</option>',
            ...shuffledOptions.map((opt, idx) => 
                `<option value="${opt}">${String.fromCharCode(65 + idx)}. ${opt}</option>`
            )
        ].join('');
        
        textHtml = textHtml.replace(
            `(${i})______`,
            `<select class="form-select cloze-gap" data-gap="${i}">${selectOptions}</select>`
        );
    }
    
    container.innerHTML = `<div class="lead">${textHtml}</div>`;
}

function shuffleArray(array) {
    return array.sort(() => Math.random() - 0.5);
}

function checkAnswers() {
    const gaps = document.querySelectorAll('.cloze-gap');
    gaps.forEach(select => {
        const gapNumber = select.dataset.gap;
        const correctAnswer = currentTest.gaps[gapNumber].correct;
        const userAnswer = select.value;
        
        select.classList.remove('correct', 'incorrect');
        
        if(userAnswer === "") {
            select.classList.add('incorrect');
            return;
        }

        if(userAnswer === correctAnswer) {
            select.classList.add('correct');
        } else {
            select.classList.add('incorrect');
        }
    });
}

// Initial generation
generateNewTest();
